(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     14201,        375]
NotebookOptionsPosition[     13386,        353]
NotebookOutlinePosition[     13796,        369]
CellTagsIndexPosition[     13753,        366]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"ParentDirectory", "[", 
       RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ",", 
      "\"\<Shared\>\""}], "}"}]}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Needs", "[", "\"\<gPlots3DEx`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Needs", "[", "\"\<gPlotsEx`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Needs", "[", "\"\<gBRDF`\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Needs", "[", "\"\<gUtils`\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"SetDirectory", "[", 
    RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ClearAll", "[", 
   RowBox[{
   "scene", ",", "camera", ",", "eyePt", ",", "lookPt", ",", "upDir", ",", 
    "fov", ",", "lights", ",", "prims", ",", "\[IndentingNewLine]", 
    "polyList", ",", "graph", ",", "graphList", ",", "createPolyGraphs"}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"scene", "=", 
   RowBox[{"ToExpression", "[", 
    RowBox[{"Import", "[", "\"\<cornell-tiny.txt\>\"", "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"camera", "=", 
   RowBox[{
    RowBox[{"scene", "[", "\"\<camera\>\"", "]"}], "[", 
    RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"eyePt", "=", 
   RowBox[{"camera", "[", "\"\<eyePt\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lookPt", "=", 
   RowBox[{"camera", "[", "\"\<lookPt\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"upDir", "=", 
   RowBox[{"camera", "[", "\"\<upDir\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"fov", "=", 
   RowBox[{"camera", "[", "\"\<fov\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"fov", "=", 
   RowBox[{
    FractionBox["fov", "180"], "\[Pi]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lights", "=", 
   RowBox[{"scene", "[", "\"\<lights\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"prims", "=", 
   RowBox[{"scene", "[", "\"\<prims\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"polyList", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"graphList", "=", 
    RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", 
      RowBox[{"i", "\[LessEqual]", 
       RowBox[{"Length", "[", "lights", "]"}]}], ",", 
      RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
      RowBox[{"AppendTo", "[", 
       RowBox[{"polyList", ",", 
        RowBox[{
         RowBox[{"lights", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", "\"\<tri\>\"", "]"}]}], 
       "]"}]}], "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
    RowBox[{"For", "[", 
     RowBox[{
      RowBox[{"i", "=", "1"}], ",", 
      RowBox[{"i", "\[LessEqual]", 
       RowBox[{"Length", "[", "prims", "]"}]}], ",", 
      RowBox[{"i", "++"}], ",", 
      RowBox[{"AppendTo", "[", 
       RowBox[{"polyList", ",", 
        RowBox[{
         RowBox[{"prims", "[", 
          RowBox[{"[", "i", "]"}], "]"}], "[", "\"\<tri\>\"", "]"}]}], 
       "]"}]}], "]"}], ";"}], "*)"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"createPolyGraphs", "[", "elems_", "]"}], ":=", 
    RowBox[{"Module", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "i", ",", "elem", ",", "tri", ",", "mat", ",", "Kd", ",", "sigma"}], 
       "}"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"For", "[", 
        RowBox[{
         RowBox[{"i", "=", "1"}], ",", 
         RowBox[{"i", "\[LessEqual]", 
          RowBox[{"Length", "[", "elems", "]"}]}], ",", 
         RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"AppendTo", "[", 
           RowBox[{"polyList", ",", 
            RowBox[{
             RowBox[{"elems", "[", 
              RowBox[{"[", "i", "]"}], "]"}], "[", "\"\<tri\>\"", "]"}]}], 
           "]"}], ";", "\[IndentingNewLine]", 
          RowBox[{"elem", "=", 
           RowBox[{"elems", "[", 
            RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
          RowBox[{"tri", "=", 
           RowBox[{"gAssocData", "[", 
            RowBox[{"elem", ",", "\"\<tri\>\""}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"mat", "=", 
           RowBox[{"gAssocData", "[", 
            RowBox[{"elem", ",", "\"\<material\>\""}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"Kd", "=", 
           RowBox[{"gAssocData", "[", 
            RowBox[{"mat", ",", "\"\<Kd\>\""}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"sigma", "=", 
           RowBox[{"gAssocData", "[", 
            RowBox[{"mat", ",", "\"\<sigma\>\""}], "]"}]}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{"graphList", ",", 
            RowBox[{"RGBColor", "[", "Kd", "]"}]}], "]"}], ";", 
          "\[IndentingNewLine]", 
          RowBox[{"AppendTo", "[", 
           RowBox[{"graphList", ",", 
            RowBox[{"Polygon", "[", "tri", "]"}]}], "]"}]}]}], 
        "\[IndentingNewLine]", "]"}], ";"}]}], "\[IndentingNewLine]", "]"}]}],
    ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"createPolyGraphs", "[", "lights", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"createPolyGraphs", "[", "prims", "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"graph", "=", 
   RowBox[{"Graphics3D", "[", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"RGBColor", "[", 
       RowBox[{"0.746", ",", "0.823", ",", "2.7"}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"Polygon", "[", "polyList", "]"}]}], "}"}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"graph2", "=", 
    RowBox[{"Graphics3D", "[", "graphList", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"Show", "[", 
  RowBox[{"graph2", ",", 
   RowBox[{"Lighting", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"{", 
      RowBox[{"\"\<Ambient\>\"", ",", "White"}], "}"}], "}"}]}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{"Boxed", "\[Rule]", "False"}], ",", " ", 
   RowBox[{"Axes", "\[Rule]", "False"}], ",", 
   RowBox[{"AxesLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"\"\<X\>\"", ",", "\"\<Y\>\"", ",", "\"\<Z\>\""}], "}"}]}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{"ViewVector", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"eyePt", ",", "lookPt"}], "}"}]}], ",", 
   RowBox[{"ViewVertical", "\[Rule]", "upDir"}], ",", 
   RowBox[{"ViewAngle", "\[Rule]", "fov"}]}], 
  "]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.8375796096478853`*^9, 3.8375796098708925`*^9}, {
   3.837579643706537*^9, 3.8375796590141945`*^9}, {3.8375797396191688`*^9, 
   3.8375799701343956`*^9}, {3.837587139784298*^9, 3.837587174766556*^9}, {
   3.8375879250035048`*^9, 3.8375879483163743`*^9}, {3.8375879879433584`*^9, 
   3.837588037014532*^9}, {3.8375915695940647`*^9, 3.837591637736456*^9}, {
   3.837592653513052*^9, 3.837592678282386*^9}, {3.8376368115351906`*^9, 
   3.837636956116087*^9}, {3.8376370021242905`*^9, 3.8376370324829645`*^9}, {
   3.83763711193229*^9, 3.83763712892241*^9}, {3.8376371736360445`*^9, 
   3.837637233539319*^9}, {3.837637283663158*^9, 3.837637313741413*^9}, {
   3.837637385443429*^9, 3.837637414514078*^9}, {3.8376374516817265`*^9, 
   3.8376374561545963`*^9}, {3.8376375056265535`*^9, 3.837637509477162*^9}, {
   3.8376375434034057`*^9, 3.8376375454219885`*^9}, 3.8376375857745667`*^9, {
   3.837637633444476*^9, 3.8376376693000174`*^9}, {3.8376377567068634`*^9, 
   3.837637792525714*^9}, {3.837637931353848*^9, 3.837638115129551*^9}, {
   3.837638152531847*^9, 3.837638162635706*^9}, {3.837639775664646*^9, 
   3.8376397835602665`*^9}, {3.8376398199523616`*^9, 
   3.8376399157953515`*^9}, {3.8376405185796237`*^9, 
   3.8376405192699842`*^9}, {3.837640569215723*^9, 3.837640618495101*^9}, {
   3.8376406570475655`*^9, 3.8376406581061287`*^9}, {3.837640692582341*^9, 
   3.8376406939663563`*^9}, {3.8376507612603106`*^9, 3.837650813447402*^9}, {
   3.8376508639734907`*^9, 3.8376508743926992`*^9}, {3.8376509335218816`*^9, 
   3.837650991130187*^9}, {3.837651133333169*^9, 3.837651601989375*^9}, {
   3.8376516562430105`*^9, 3.8376517413394847`*^9}, 3.837651772266875*^9, {
   3.8376518196227193`*^9, 3.8376520856647797`*^9}, {3.8376521167423115`*^9, 
   3.837652175789961*^9}},
 CellLabel->
  "In[3267]:=",ExpressionUUID->"c6a38e02-cc4a-43b3-88e1-6ca638b100b4"],

Cell[BoxData[
 Graphics3DBox[{
   {RGBColor[20.75, 10.82, 2.76], 
    Polygon3DBox[{{343., 227., 548.7}, {343., 332., 548.7}, {213., 332., 
     548.7}}]}, 
   {RGBColor[0.57, 0.04, 0.04], 
    Polygon3DBox[{{552.8, 0., 0.}, {549.6, 559.2, 0.}, {556., 559.2, 
     548.8}}]}, 
   {RGBColor[0.89, 0.7, 0.67], 
    Polygon3DBox[{{0., 559.2, 0.}, {549.6, 559.2, 0.}, {552.8, 0., 0.}}]}},
  Axes->False,
  AxesLabel->{
    FormBox["\"X\"", TraditionalForm], 
    FormBox["\"Y\"", TraditionalForm], 
    FormBox["\"Z\"", TraditionalForm]},
  Boxed->False,
  Lighting->{{"Ambient", 
     GrayLevel[1]}},
  ViewAngle->0.6544984694978736,
  ViewVector->{{278., -800., 273.}, {278., 0., 273.}},
  ViewVertical->{0., 0., 1.}]], "Output",
 CellChangeTimes->{{3.8376518966991816`*^9, 3.83765205584517*^9}, 
   3.83765213981618*^9, {3.8376521718925705`*^9, 3.837652177349078*^9}, 
   3.837652371841002*^9},
 CellLabel->
  "Out[3290]=",ExpressionUUID->"ef8e2bac-cfb6-458b-a392-8d94917f3bc1"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Show", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"Graphics3D", "[", 
    RowBox[{"Polygon", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", "\[IndentingNewLine]", "\t", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", "1", ",", "1"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"0", ",", "0", ",", "1"}], "}"}]}], "}"}], ",", 
        "\[IndentingNewLine]", "\t", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"1", ",", "0", ",", "0"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"1", ",", "1", ",", "1"}], "}"}], ",", 
          RowBox[{"{", 
           RowBox[{"0", ",", "0", ",", 
            RowBox[{"-", "1"}]}], "}"}]}], "}"}]}], "\[IndentingNewLine]", 
       "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"VertexColors", "\[Rule]", "\[IndentingNewLine]", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"Green", ",", "Green", ",", "Green"}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"Red", ",", "Red", ",", "Red"}], "}"}]}], 
        "\[IndentingNewLine]", "}"}]}]}], "\[IndentingNewLine]", "]"}], "]"}],
    ",", "\[IndentingNewLine]", 
   RowBox[{"Lighting", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"{", 
      RowBox[{"\"\<Ambient\>\"", ",", "White"}], "}"}], "}"}]}]}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.837640137545114*^9, 3.837640230883232*^9}, {
  3.837640377024192*^9, 3.8376405352696733`*^9}},
 CellLabel->
  "In[1788]:=",ExpressionUUID->"833c8ba3-cd1f-4f35-88e0-cf9a2a60e6ba"],

Cell[BoxData[
 Graphics3DBox[
  Polygon3DBox[{{{1, 0, 0}, {1, 1, 1}, {0, 0, 1}}, {{1, 0, 0}, {1, 1, 1}, {0, 
   0, -1}}},
   VertexColors->{{
      RGBColor[0, 1, 0], 
      RGBColor[0, 1, 0], 
      RGBColor[0, 1, 0]}, {
      RGBColor[1, 0, 0], 
      RGBColor[1, 0, 0], 
      RGBColor[1, 0, 0]}}],
  ImageSize->{301.60261708861356`, 524.7129927244906},
  ImageSizeRaw->Automatic,
  Lighting->{{"Ambient", 
     GrayLevel[1]}},
  ViewPoint->{2.671948853427691, 0.6365334884480661, 1.9762374459438268`},
  ViewVertical->{-0.006384088507512142, 0.11071264792979835`, 
   0.9938319541060755}]], "Output",
 CellChangeTimes->{{3.8376402000219903`*^9, 3.8376402213717327`*^9}, {
  3.837640381791864*^9, 3.8376405429572926`*^9}},
 CellLabel->
  "Out[1788]=",ExpressionUUID->"0992e4c2-c452-4583-aa85-631ed512edc7"]
}, Open  ]],

Cell[BoxData["\[IndentingNewLine]"], "Input",
 CellChangeTimes->{
  3.8376404022870436`*^9},ExpressionUUID->"9df1b70f-d3bc-4b3b-93e1-\
d2273edbe353"]
},
WindowSize->{759, 813},
WindowMargins->{{387, Automatic}, {-177, Automatic}},
FrontEndVersion->"12.0 for Microsoft Windows (64-bit) (April 8, 2019)",
StyleDefinitions->FrontEnd`FileName[{"Utility"}, "Outline.nb", 
  CharacterEncoding -> "UTF-8"]
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 9044, 223, 1036, "Input",ExpressionUUID->"c6a38e02-cc4a-43b3-88e1-6ca638b100b4"],
Cell[9627, 247, 977, 25, 377, "Output",ExpressionUUID->"ef8e2bac-cfb6-458b-a392-8d94917f3bc1"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10641, 277, 1765, 45, 257, "Input",ExpressionUUID->"833c8ba3-cd1f-4f35-88e0-cf9a2a60e6ba"],
Cell[12409, 324, 809, 21, 542, "Output",ExpressionUUID->"0992e4c2-c452-4583-aa85-631ed512edc7"]
}, Open  ]],
Cell[13233, 348, 149, 3, 48, "Input",ExpressionUUID->"9df1b70f-d3bc-4b3b-93e1-d2273edbe353"]
}
]
*)

